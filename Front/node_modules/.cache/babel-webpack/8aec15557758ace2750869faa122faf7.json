{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/OneDrive/\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD/fullstack/ANGULAR/SECONDRESTORE/Front/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { UserModel } from 'src/app/models/user.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/users.service\";\nimport * as i3 from \"src/app/services/city.service\";\nimport * as i4 from \"src/app/services/notify.service\";\nimport * as i5 from \"@angular/router\";\nexport class RegisterComponent {\n  constructor(myAuthService, myUserService, myCityService, notify, myRouter) {\n    this.myAuthService = myAuthService;\n    this.myUserService = myUserService;\n    this.myCityService = myCityService;\n    this.notify = notify;\n    this.myRouter = myRouter;\n    this.user = new UserModel();\n    this.step = false;\n    this.idExists = false;\n    this.emailExists = false;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this.users = yield _this.myUserService.getAllidcardsEmails();\n      } catch (err) {// this.notify.error(err);\n      }\n\n      try {\n        _this.cities = yield _this.myCityService.getAllCities();\n      } catch (err) {// this.notify.error(err);\n      }\n    })();\n  }\n\n  register() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.myAuthService.register(_this2.user); // this.notify.success(\"You are registered :-)\");\n\n        _this2.myRouter.navigateByUrl(\"/home\");\n      } catch (err) {// this.notify.error(err);\n      }\n    })();\n  }\n\n  checkEmail() {\n    this.emailExists = false;\n    this.emailMatch = this.users.findIndex(item => item.email === this.user.email);\n\n    if (this.emailMatch >= 0) {\n      this.emailExists = true;\n    }\n  }\n\n  checkId() {\n    this.idExists = false;\n    this.idMatch = this.users.findIndex(item => item.idcard === this.user.idcard);\n\n    if (this.idMatch >= 0) {\n      this.idExists = true;\n    }\n  }\n\n  continue() {\n    if (this.idMatch < 0 && this.emailMatch < 0) {\n      this.step = true;\n    } else {\n      this.step = false;\n    }\n  }\n\n  back() {\n    this.step = false;\n  }\n\n}\n\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.CityService), i0.ɵɵdirectiveInject(i4.NotifyService), i0.ɵɵdirectiveInject(i5.Router));\n};\n\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  decls: 0,\n  vars: 0,\n  template: function RegisterComponent_Template(rf, ctx) {},\n  styles: [\"form[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]  {\\r\\n    width: 300px;\\r\\n    margin: auto;\\r\\n    text-align: left;\\r\\n}\\r\\n\\r\\ninput[_ngcontent-%COMP%], label[_ngcontent-%COMP%] {\\r\\n\\twidth: 100%;\\r\\n    box-sizing: border-box;\\r\\n    font-size: x-large;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n    width: 50%;\\r\\n    box-sizing: border-box;\\r\\n    font-size: x-large;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.back[_ngcontent-%COMP%] {\\r\\n    font-size: medium;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0lBQ0ksWUFBWTtJQUNaLFlBQVk7SUFDWixnQkFBZ0I7QUFDcEI7O0FBRUE7Q0FDQyxXQUFXO0lBQ1Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxVQUFVO0lBQ1Ysc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxpQkFBaUI7QUFDckIiLCJmaWxlIjoicmVnaXN0ZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mb3JtLCBtYXQtZm9ybS1maWVsZCAge1xyXG4gICAgd2lkdGg6IDMwMHB4O1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxufVxyXG5cclxuaW5wdXQsIGxhYmVsIHtcclxuXHR3aWR0aDogMTAwJTtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICBmb250LXNpemU6IHgtbGFyZ2U7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG5idXR0b24ge1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICBmb250LXNpemU6IHgtbGFyZ2U7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG4uYmFjayB7XHJcbiAgICBmb250LXNpemU6IG1lZGl1bTtcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["C:\\Users\\user\\OneDrive\\מסמכים\\fullstack\\ANGULAR\\SECONDRESTORE\\Front\\src\\app\\components\\auth-area\\register\\register.component.ts"],"names":[],"mappings":";AAGA,SAAS,SAAT,QAA0B,2BAA1B;;;;;;;AAWA,OAAM,MAAO,iBAAP,CAAwB;AAW1B,EAAA,WAAA,CACY,aADZ,EAEY,aAFZ,EAGY,aAHZ,EAIY,MAJZ,EAKY,QALZ,EAK4B;AAJhB,SAAA,aAAA,GAAA,aAAA;AACA,SAAA,aAAA,GAAA,aAAA;AACA,SAAA,aAAA,GAAA,aAAA;AACA,SAAA,MAAA,GAAA,MAAA;AACA,SAAA,QAAA,GAAA,QAAA;AAdL,SAAA,IAAA,GAAO,IAAI,SAAJ,EAAP;AACA,SAAA,IAAA,GAAgB,KAAhB;AACA,SAAA,QAAA,GAAoB,KAApB;AACA,SAAA,WAAA,GAAuB,KAAvB;AAW0B;;AAE3B,EAAA,QAAQ,GAAA;AAAA;;AAAA;AACV,UAAI;AACA,QAAA,KAAI,CAAC,KAAL,SAAmB,KAAI,CAAC,aAAL,CAAmB,mBAAnB,EAAnB;AACH,OAFD,CAEE,OAAO,GAAP,EAAY,CACV;AACH;;AAED,UAAI;AACA,QAAA,KAAI,CAAC,MAAL,SAAoB,KAAI,CAAC,aAAL,CAAmB,YAAnB,EAApB;AACH,OAFD,CAEE,OAAO,GAAP,EAAY,CACV;AACH;AAXS;AAYb;;AAEY,EAAA,QAAQ,GAAA;AAAA;;AAAA;AACjB,UAAI;AACA,cAAM,MAAI,CAAC,aAAL,CAAmB,QAAnB,CAA4B,MAAI,CAAC,IAAjC,CAAN,CADA,CAEA;;AACA,QAAA,MAAI,CAAC,QAAL,CAAc,aAAd,CAA4B,OAA5B;AACH,OAJD,CAKA,OAAM,GAAN,EAAW,CACP;AACH;AARgB;AASpB;;AAEM,EAAA,UAAU,GAAA;AACb,SAAK,WAAL,GAAmB,KAAnB;AACA,SAAK,UAAL,GAAkB,KAAK,KAAL,CAAW,SAAX,CAAqB,IAAI,IAAI,IAAI,CAAC,KAAL,KAAe,KAAK,IAAL,CAAU,KAAtD,CAAlB;;AACA,QAAI,KAAK,UAAL,IAAiB,CAArB,EAAwB;AAAE,WAAK,WAAL,GAAmB,IAAnB;AAA0B;AAEvD;;AAEM,EAAA,OAAO,GAAA;AACV,SAAK,QAAL,GAAgB,KAAhB;AACA,SAAK,OAAL,GAAe,KAAK,KAAL,CAAW,SAAX,CAAqB,IAAI,IAAI,IAAI,CAAC,MAAL,KAAgB,KAAK,IAAL,CAAU,MAAvD,CAAf;;AACA,QAAI,KAAK,OAAL,IAAc,CAAlB,EAAqB;AAAE,WAAK,QAAL,GAAgB,IAAhB;AAAuB;AAEjD;;AAEM,EAAA,QAAQ,GAAA;AACX,QAAI,KAAK,OAAL,GAAa,CAAb,IAAkB,KAAK,UAAL,GAAgB,CAAtC,EAAyC;AACrC,WAAK,IAAL,GAAY,IAAZ;AACH,KAFD,MAEO;AACH,WAAK,IAAL,GAAY,KAAZ;AACH;AACJ;;AAED,EAAA,IAAI,GAAA;AACA,SAAK,IAAL,GAAY,KAAZ;AACH;;AAnEyB;;;mBAAjB,iB,EAAiB,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,WAAA,C,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,WAAA,C,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,WAAA,C,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,aAAA,C,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,MAAA,C;AAAA,C;;;QAAjB,iB;AAAiB,EAAA,SAAA,EAAA,CAAA,CAAA,cAAA,CAAA,C;AAAA,EAAA,KAAA,EAAA,C;AAAA,EAAA,IAAA,EAAA,C;AAAA,EAAA,QAAA,EAAA,SAAA,0BAAA,CAAA,EAAA,EAAA,GAAA,EAAA,CAAA,C;AAAA,EAAA,MAAA,EAAA,CAAA,6/CAAA","sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport CityModel from 'src/app/models/city.model';\nimport { UserModel } from 'src/app/models/user.model';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { CityService } from 'src/app/services/city.service';\nimport { NotifyService } from 'src/app/services/notify.service';\nimport { UserService } from 'src/app/services/users.service';\n\n@Component({\n    selector: 'app-register',\n    templateUrl: './register.component.html',\n    styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent {\n\n    public user = new UserModel();\n    public step: boolean = false;\n    public idExists: boolean = false;\n    public emailExists: boolean = false;\n    public users: UserModel[];\n    private idMatch: number;\n    private emailMatch: number;\n    public cities: CityModel[];\n\n    constructor(\n        private myAuthService: AuthService,\n        private myUserService: UserService,\n        private myCityService: CityService,\n        private notify: NotifyService,\n        private myRouter: Router) { }\n\n    async ngOnInit() {\n        try {\n            this.users = await this.myUserService.getAllidcardsEmails();\n        } catch (err) {\n            // this.notify.error(err);\n        }\n\n        try {\n            this.cities = await this.myCityService.getAllCities();\n        } catch (err) {\n            // this.notify.error(err);\n        }        \n    }\n\n    public async register() {\n        try {\n            await this.myAuthService.register(this.user);\n            // this.notify.success(\"You are registered :-)\");\n            this.myRouter.navigateByUrl(\"/home\");\n        }\n        catch(err) {\n            // this.notify.error(err);\n        }\n    }\n\n    public checkEmail() {\n        this.emailExists = false;\n        this.emailMatch = this.users.findIndex(item => item.email === this.user.email);\n        if (this.emailMatch>=0) { this.emailExists = true; }\n\n    }\n\n    public checkId() {\n        this.idExists = false;\n        this.idMatch = this.users.findIndex(item => item.idcard === this.user.idcard);\n        if (this.idMatch>=0) { this.idExists = true; }\n\n    }\n\n    public continue() {\n        if (this.idMatch<0 && this.emailMatch<0) { \n            this.step = true; \n        } else {\n            this.step = false;\n        }\n    }\n    \n    back() {\n        this.step = false;\n    }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}