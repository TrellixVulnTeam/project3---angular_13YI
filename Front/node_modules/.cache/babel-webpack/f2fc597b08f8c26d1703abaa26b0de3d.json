{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/OneDrive/\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD/fullstack/ANGULAR/SECONDRESTORE/Front/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from 'src/environments/environment';\nimport { OrderUnitsDialogComponent } from '../../order-area/order-units-dialog/order-units-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"src/app/services/notify.service\";\nimport * as i4 from \"./../../../services/products.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\n\nfunction ProductDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h3\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"img\", 1);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelement(10, \"br\");\n    i0.ɵɵelementStart(11, \"a\", 2);\n    i0.ɵɵtext(12, \"Back to List\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\");\n    i0.ɵɵtext(14, \" | \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"a\", 3);\n    i0.ɵɵtext(16, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18, \" | \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"a\", 4);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_0_Template_a_click_19_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.delete();\n    });\n    i0.ɵɵtext(20, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\");\n    i0.ɵɵtext(22, \" | \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ProductDetailsComponent_div_0_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.openDialog();\n    });\n    i0.ɵɵtext(24, \"Add to cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.product.ProductName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", i0.ɵɵpipeBind2(5, 5, ctx_r0.product.UnitPrice, \"ILS\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Category: \", ctx_r0.product.CategoryID, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r0.imageUrl + ctx_r0.product.imageName, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(7);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/products/edit/\", ctx_r0.product.ProductID, \"\");\n  }\n}\n\nexport class ProductDetailsComponent {\n  constructor(myActivatedRoute, dialog, //  for dialog!!!\n  // private modalService: NgbModal,\n  notify, myRouter, myProductsService) {\n    this.myActivatedRoute = myActivatedRoute;\n    this.dialog = dialog;\n    this.notify = notify;\n    this.myRouter = myRouter;\n    this.myProductsService = myProductsService;\n    this.imageUrl = environment.productImagesUrl;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const id = +_this.myActivatedRoute.snapshot.params.id; // Take a route parameter named id.\n\n        _this.product = yield _this.myProductsService.getOneProduct(id);\n      } catch (err) {\n        _this.notify.error(err);\n      }\n    })();\n  }\n\n  openDialog() {\n    const dialogRef = this.dialog.open(OrderUnitsDialogComponent, {\n      data: {\n        quantity: this.quantity\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      console.log('The dialog was closed');\n      this.quantity = result;\n      console.log(this.quantity);\n    });\n  }\n\n  delete() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const answer = confirm(\"Are you sure?\");\n        if (!answer) return;\n        yield _this2.myProductsService.deleteProduct(_this2.product.ProductID);\n\n        _this2.notify.success(\"Product has been deleted.\");\n\n        _this2.myRouter.navigateByUrl(\"/products\");\n      } catch (err) {\n        _this2.notify.error(err);\n      }\n    })();\n  }\n\n}\n\nProductDetailsComponent.ɵfac = function ProductDetailsComponent_Factory(t) {\n  return new (t || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.NotifyService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.ProductsService));\n};\n\nProductDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetailsComponent,\n  selectors: [[\"app-product-details\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [\"width\", \"200\", 3, \"src\"], [\"routerLink\", \"/products\"], [3, \"routerLink\"], [\"href\", \"javascript:void 0\", 3, \"click\"], [\"mat-button\", \"\", 3, \"click\"]],\n  template: function ProductDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetailsComponent_div_0_Template, 25, 8, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.product);\n    }\n  },\n  directives: [i5.NgIf, i1.RouterLinkWithHref, i6.MatButton],\n  pipes: [i5.CurrencyPipe],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:\\Users\\user\\OneDrive\\מסמכים\\fullstack\\ANGULAR\\SECONDRESTORE\\Front\\src\\app\\components\\products-area\\product-details\\product-details.component.ts","C:\\Users\\user\\OneDrive\\מסמכים\\fullstack\\ANGULAR\\SECONDRESTORE\\Front\\src\\app\\components\\products-area\\product-details\\product-details.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ProductsService } from './../../../services/products.service';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport ProductModel from 'src/app/models/product.model';\nimport { NotifyService } from 'src/app/services/notify.service';\nimport { environment } from 'src/environments/environment';\nimport { MatDialog, MAT_DIALOG_DATA} from '@angular/material/dialog';\nimport { OrderUnitsDialogComponent } from '../../order-area/order-units-dialog/order-units-dialog.component';\n\n\n\n// imports: [MatDialogModule]\n\nexport interface DialogData {\n    [x: string]: string;\n    // quantity: number;\n  }\n\n\n@Component({\n    selector: 'app-product-details',\n    templateUrl: './product-details.component.html'\n})\nexport class ProductDetailsComponent implements OnInit {\n\n    public product: ProductModel;\n\n    public quantity: number;\n\n    public imageUrl = environment.productImagesUrl;\n\n    constructor(\n        private myActivatedRoute: ActivatedRoute,\n        public dialog : MatDialog,    //  for dialog!!!\n        // private modalService: NgbModal,\n        private notify: NotifyService,\n        private myRouter: Router,\n        private myProductsService: ProductsService) { }\n\n    async ngOnInit() {\n        try {\n            const id = +this.myActivatedRoute.snapshot.params.id; // Take a route parameter named id.\n            this.product = await this.myProductsService.getOneProduct(id);\n        }\n        catch (err) {\n            this.notify.error(err);\n        }\n    }\n\n    public openDialog() {\n        const dialogRef = this.dialog.open(OrderUnitsDialogComponent,  {\n            data: {quantity: this.quantity}\n        });\n    dialogRef.afterClosed().subscribe(result => {\n            console.log('The dialog was closed');\n            this.quantity = result;\n            console.log(this.quantity)\n        });\n    }\n    \n\n    public async delete() {\n        try {\n            const answer = confirm(\"Are you sure?\");\n            if (!answer) return;\n            await this.myProductsService.deleteProduct(this.product.ProductID);\n            this.notify.success(\"Product has been deleted.\")\n            this.myRouter.navigateByUrl(\"/products\");\n        }\n        catch (err) {\n            this.notify.error(err);\n        }\n    }\n\n}\n\n\n","<div *ngIf=\"product\">\n\n    <h3>{{product.ProductName}}</h3>\n    \n    <h3>Price: {{product.UnitPrice | currency:\"ILS\"}}</h3>\n\n    <h3>Category: {{product.CategoryID}}</h3>\n\n\n    <img [src]=\"imageUrl + product.imageName\" width=\"200\">\n\n    <br><br>\n\n    <a routerLink=\"/products\">Back to List</a>\n\n    <span> | </span>\n\n    <a routerLink=\"/products/edit/{{product.ProductID}}\">Edit</a>\n\n    <span> | </span>\n\n    <a href=\"javascript:void 0\" (click)=\"delete()\">Delete</a>\n\n    <span> | </span>\n\n    <button mat-button (click)=\"openDialog()\">Add to cart</button>\n\n\n</div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}