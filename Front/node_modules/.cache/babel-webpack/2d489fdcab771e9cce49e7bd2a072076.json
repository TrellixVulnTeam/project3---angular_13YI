{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/OneDrive/\\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD/fullstack/ANGULAR/SECONDRESTORE/Front/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { environment } from 'src/environments/environment';\nimport { citiesDownloadedAction } from '../redux/city-state';\nimport store from '../redux/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CityService {\n  constructor(http) {\n    this.http = http;\n  } // Get carts per user: \n\n\n  getAllCities() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (store.getState().cityState.cities.length === 0) {\n        const cities = yield _this.http.get(environment.citiesUrl).toPromise();\n        store.dispatch(citiesDownloadedAction(cities));\n      }\n\n      return store.getState().cityState.cities;\n    })();\n  }\n\n}\n\nCityService.ɵfac = function CityService_Factory(t) {\n  return new (t || CityService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nCityService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CityService,\n  factory: CityService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:\\Users\\user\\OneDrive\\מסמכים\\fullstack\\ANGULAR\\SECONDRESTORE\\Front\\src\\app\\services\\city.service.ts"],"names":[],"mappings":";AAEA,SAAS,WAAT,QAA4B,8BAA5B;AAEA,SAAS,sBAAT,QAAuC,qBAAvC;AACA,OAAO,KAAP,MAAkB,gBAAlB;;;AAMA,OAAM,MAAO,WAAP,CAAkB;AAEtB,EAAA,WAAA,CAAoB,IAApB,EAAoC;AAAhB,SAAA,IAAA,GAAA,IAAA;AAAqB,GAFnB,CAItB;;;AACa,EAAA,YAAY,GAAA;AAAA;;AAAA;AACvB,UAAI,KAAK,CAAC,QAAN,GAAiB,SAAjB,CAA2B,MAA3B,CAAkC,MAAlC,KAA6C,CAAjD,EAAoD;AAChD,cAAM,MAAM,SAAS,KAAI,CAAC,IAAL,CAAU,GAAV,CAA2B,WAAW,CAAC,SAAvC,EAAkD,SAAlD,EAArB;AACA,QAAA,KAAK,CAAC,QAAN,CAAe,sBAAsB,CAAC,MAAD,CAArC;AACH;;AACD,aAAO,KAAK,CAAC,QAAN,GAAiB,SAAjB,CAA2B,MAAlC;AALuB;AAOtB;;AAZmB;;;mBAAX,W,EAAW,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C;AAAA,C;;;SAAX,W;AAAW,EAAA,OAAA,EAAX,WAAW,CAAA,I;AAAA,EAAA,UAAA,EAFV","sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport CityModel from '../models/city.model';\r\nimport { citiesDownloadedAction } from '../redux/city-state';\r\nimport store from '../redux/store';\r\nimport { TimezoneService } from './timezone.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CityService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  // Get carts per user: \r\n  public async getAllCities() {\r\n    if (store.getState().cityState.cities.length === 0) {\r\n        const cities = await this.http.get<CityModel[]>(environment.citiesUrl).toPromise();\r\n        store.dispatch(citiesDownloadedAction(cities));\r\n    }\r\n    return store.getState().cityState.cities;\r\n\r\n    }\r\n\r\n}"],"sourceRoot":""},"metadata":{},"sourceType":"module"}